"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{38726:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(52322),a=n(56370),r=n(2784),i=n(59659),l=n(12744),o=n(60009),c=n(10029),u=n(63686);function d(e){let{title:t="Please sign in to view this page.",body:n="Sign in with your wallet to continue.",image:d="sphere",children:x,className:m}=e,{openSIWE:f,isConnected:h}=(0,u.Z)(),{isSignedIn:p,isLoading:j}=(0,a.Pe)(),g=(0,r.useCallback)(()=>{try{f(!0)}catch(e){console.error(e)}},[f]);return h?p?(0,s.jsx)(s.Fragment,{children:x}):(0,s.jsx)(l.Z,{centerVertically:!0,className:m,children:(0,s.jsx)(o.Z,{title:t,body:n,image:d,children:(0,s.jsx)(i.Z,{size:"xs",variant:"gradient",color:"secondary",onClick:g,loading:j,children:"Sign In"})})}):(0,s.jsx)(c.Z,{})}},59659:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(52322),a=n(95695),r=n(72486),i=n(72579),l=n.n(i),o=n(70040),c=n(15745);let u={flat:{primary:"#fff",secondary:"#000",tertiary:"#fff",white:"#000"},gradient:{primary:"#fff",secondary:"#000",tertiary:"#fff",white:"#000"},outline:{primary:"#5379FF",secondary:"#41B569",tertiary:"#fff",white:"#fff"},transparent:{primary:"#5379FF",secondary:"#41B569",tertiary:"#fff",white:"#fff"}};function d(e){let{loading:t=!1,disabled:n=!1,color:i=o.x7,variant:d=o.WB,onClick:x,children:m,...f}=e,h=l()(u,"".concat(d,".").concat(i),u.flat.primary);return(0,s.jsxs)(o.ZP,{disabled:n||t,onClick:t?void 0:x,color:i,variant:d,...f,children:[(0,s.jsx)(a.M,{mode:"popLayout",children:t&&(0,s.jsx)(r.E.span,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"flex items-center",children:(0,s.jsx)(c.Z,{size:12,color:h})})}),(0,s.jsx)(r.E.span,{layout:!0,children:m})]})}},72233:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(52322),a=n(88329);function r(e){let{children:t}=e;return(0,a.tm)()?(0,s.jsx)(s.Fragment,{children:t}):null}},45575:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(52322),a=n(69423),r=n(56370),i=n(70040),l=n(59659),o=n(72233);function c(e){let{hasAvatar:t=!0,children:n,...c}=e;return(0,s.jsx)(o.Z,{children:(0,s.jsx)(r.x3.Custom,{children:e=>{let{isConnecting:o,isConnected:u,show:d,address:x,ensName:m}=e;return u?(0,s.jsxs)(i.ZP,{onClick:d,...c,children:[t&&(0,s.jsx)(r.qE,{address:x,size:20}),(0,s.jsx)("span",{children:(0,a.HH)(m)?m:(0,a.a_)(x)})]}):(0,s.jsx)(l.Z,{onClick:d,loading:o,...c,children:null!=n?n:"Connect Wallet"})}})})}},60009:function(e,t,n){n.d(t,{Z:function(){return o}});var s=n(52322),a=n(69423),r=n(96577),i=n.n(r),l=n(43259);function o(e){let{title:t,body:n,image:r,children:o}=e;return(0,s.jsxs)(l.Z,{direction:"column",align:"center",justify:"center",className:"gap-4",children:[(0,a.HH)(r)&&(0,s.jsx)("div",{className:"max-w-[200px] w-full aspect-square relative",children:(0,s.jsx)(i(),{src:"/empty-state-".concat(r,".png"),alt:"A strange and mystical shape.",fill:!0})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-semibold text-primary-text text-lg mb-1",children:t}),(0,s.jsx)("p",{className:"text-secondary-text",children:n})]}),o]})}},76785:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(52322),a=n(2784);function r(e){let{children:t,onClick:n,preventPropagation:r=!1,...i}=e,l=(0,a.useCallback)(e=>{r&&e.stopPropagation(),"function"==typeof n&&n(e)},[r,n]);return(0,s.jsx)("a",{...i,target:"_blank",rel:"nofollow noopener noreferrer",onClick:l,children:t})}},54076:function(e,t,n){var s=n(52322);n(2784);var a=n(47361),r=n.n(a);t.Z=e=>{let{size:t=150,color:n="#5379FF"}=e;return(0,s.jsx)(r(),{color:n,className:"text-primary",loading:!0,size:t})}},15745:function(e,t,n){n.d(t,{Z:function(){return s.Z}});var s=n(54076)},27933:function(e,t,n){n.d(t,{Z:function(){return ek}});var s=n(52322),a=n(72779),r=n.n(a),i=n(2784),l=n(45575),o=n(93804),c=n(92905),u=n(1469),d=n(56370),x=n(77245),m=n(18978),f=n(38726),h=n(70040),p=n(68954),j=n(72313),g=n(60363),v=n(55067),y=n(88811),b=n(95695),w=n(72486),N=n(96577),k=n.n(N),C=n(5632),Z=n(43259);let E={lessThanXSeconds:"<1m",xSeconds:"<1m",halfAMinute:"30s",lessThanXMinutes:"{{count}}m",xMinutes:"{{count}}m",aboutXHours:"{{count}}h",xHours:"{{count}}h",xDays:"{{count}}d",aboutXWeeks:"{{count}}w",xWeeks:"{{count}}w",aboutXMonths:"{{count}}mo",xMonths:"{{count}}mo",aboutXYears:"{{count}}y",xYears:"{{count}}y",overXYears:"{{count}}y",almostXYears:"{{count}}y"};function P(e,t){return E[e].replace("{{count}}",t)}function S(e){let{read:t,text:n,questId:a,image:r,displayAt:l,notificationType:o,index:u}=e,d=(0,C.useRouter)(),x=new Date(l),m=(0,j.UJ)(),f=(0,i.useCallback)(()=>{switch(m(c.z.NotificationClick,{eventProperties:{notificationType:o}}),o){case"questCompleted":case"questStarted":d.push("/quests/".concat(a))}},[o,a,d,m]);return(0,s.jsxs)("button",{className:"hover:bg-white/5 p-2 pl-4 cursor-pointer relative overflow-hidden w-full block",tabIndex:0,onClick:f,children:[(0,s.jsx)(b.M,{initial:!1,children:!t&&(0,s.jsx)(w.E.div,{className:"absolute w-2 h-2 rounded-full bg-badge-success -left-1 top-1/2",style:{boxShadow:"0px 0px 4px #00CFB6, inset 0px 0px 6px #4CD572"},initial:{x:"100%",y:"-50%"},animate:{x:"0%",y:"-50%"},exit:{x:"-100%",y:"-50%"},transition:{delay:.1*u,type:"spring",stiffness:400,damping:35}})}),(0,s.jsxs)(Z.Z,{className:"gap-2 w-full",align:"center",children:[(0,s.jsx)("div",{className:"w-5 h-5 flex-shrink-0 relative",children:(0,s.jsx)(k(),{src:r,alt:n,fill:!0})}),(0,s.jsx)("div",{className:"text-sm flex-1 min-w-0 text-left",children:(0,s.jsx)("p",{className:"text-badge-success truncate",children:function(e){let{notificationType:t,text:n}=e;switch(t){case"questCompleted":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-white",children:"You completed"})," ",n,"!"]});case"questStarted":return(0,s.jsxs)(s.Fragment,{children:[n," ",(0,s.jsx)("span",{className:"text-white",children:"has started!"})]});default:return(0,s.jsx)("span",{className:"text-white",children:"ERR_UNSUPPORTED_NOTIFICATION_TYPE"})}}({notificationType:o,text:n})})}),(0,s.jsx)("time",{className:"font-light text-white/50 text-xs cursor-help flex-shrink-0",title:(0,g.Z)(x,"MMM dd, yyyy @ hh:mm a"),children:(0,v.Z)(x,{locale:{...y.Z,formatDistance:P}})})]})]})}var T=n(87686),A=n(77227),M=n(20814),D=n(10711),z=n(72960),R=n.n(z),q=n(34498),F=n.n(q),H=n(45711),L=n(69423),I=n(30195);let U=I.z.enum(["questCompleted","questStarted"]),O=I.z.object({id:I.z.string(),displayAt:I.z.string(),read:I.z.boolean(),image:I.z.string(),text:I.z.string(),notificationType:U,questId:I.z.string()}),_=I.z.object({notifications:I.z.array(O)}),B=I.z.object({success:I.z.boolean(),message:I.z.string().optional()});class W{static async getUserNotifications(e,t){return(0,L.hu)((0,L.At)(e),"Invalid address"),(0,H.Z)({config:{method:"GET",url:"/users/notifications?address=".concat(e),params:{from:t}},responseSchema:_,identifier:"NotificationsService.getUserNotifications",protectedRoute:!0})}static async markUserNotificationsAsRead(e){return(0,L.hu)((0,L.At)(e),"Invalid address"),(0,H.Z)({config:{method:"POST",url:"/users/notifications/read?address=".concat(e)},responseSchema:B,identifier:"NotificationsService.markUserNotificationsAsRead",protectedRoute:!0})}}let Y=(0,D.Z)(.5);function Q(e){return[e,"notifications"]}function X(e){let{address:t}=e,n=(0,M.N)({initialPageParam:"",queryKey:Q(t),queryFn:async e=>{let{pageParam:n}=e,{notifications:s}=await W.getUserNotifications(t||"0x",n);return s},select:e=>{let t=e.pages.flatMap(e=>e);return{pageParams:e.pageParams,pages:F()(t,"displayAt",["desc"])}},getNextPageParam:(e,t)=>{var n;let s=(n=R()(t,e=>e.length>0),F()(n,"displayAt",["desc"]))[0],a=null==s?void 0:s.displayAt;return(0,o.HH)(a)?new Date(new Date(a).getTime()+1).toISOString():""},enabled:(0,o.At)(t),staleTime:1/0});return(0,i.useEffect)(()=>{let e=setInterval(n.fetchNextPage,Y);return()=>clearInterval(e)},[n.fetchNextPage]),n}var J=n(7278);let V=0,K=(0,A.Z)(5),$=e=>{let t=Q(e),n=J.E.getQueryData(t);return(((null==n?void 0:n.pages)||[]).flatMap(e=>e).filter(e=>{let{read:t}=e;return!t}).length||0)>0};function G(e){let{data:t,address:n}=e;return!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i.useRef)(0),{mutate:s}=(0,T.D)({onSuccess:(e,t)=>{let{address:n}=t,s=Q(n);J.E.setQueryData(s,e=>{let t=(null==e?void 0:e.pages)||[];return null==e||0===t.length?e:{pageParams:e.pageParams,pages:t.map(e=>e.map(e=>({...e,read:!0})))}})},mutationFn:async e=>{let{address:t}=e;if(!(!$(t)||Date.now()-V<K))return V=Date.now(),W.markUserNotificationsAsRead(t)}});(0,i.useEffect)(()=>{(0,o.At)(e)&&(window.clearTimeout(n.current),n.current=window.setTimeout(()=>s({address:e}),t))},[e,t,s])}(n,1e3),(0,s.jsx)("div",{children:t.map((e,t)=>(0,i.createElement)(S,{...e,index:t,key:e.id}))})}var ee=n(92096),et=n(89079);function en(){let e=(0,C.useRouter)(),{setOpen:t}=(0,et.lp)(),n=(0,i.useCallback)(()=>{e.push("/settings"),t(!1)},[e,t]);return(0,s.jsx)(h.ZP,{spacing:"xs",radius:"full",variant:"transparent",onClick:n,children:(0,s.jsx)(ee.Z,{className:"text-[#6E717E] opacity-60"})})}var es=n(21226);function ea(e){let{count:t}=e;return(0,s.jsx)(b.M,{children:t>0&&(0,s.jsx)(w.E.div,{className:"bg-red-500 text-white px-1 h-4 flex items-center justify-center text-xs font-semibold rounded-md absolute -right-1 -top-1 z-20 tabular-nums",initial:{opacity:0,scale:0,rotate:30},animate:{opacity:1,scale:[0,1.3,1],rotate:0},exit:{opacity:0,scale:0,rotate:0},transition:{type:"spring",stiffness:400,damping:35},children:(0,s.jsx)(es.Z,{value:String(t)})})})}var er=n(25599),ei=n(63686);function el(e){let{read:t}=e;return!t}function eo(e){let{address:t}=e,{data:n}=X({address:t}),a=((null==n?void 0:n.pages)||[]).filter(el).length;return(0,s.jsx)(ea,{count:a})}function ec(e){let{address:t}=e,{data:n,isPending:a,isSuccess:r,isError:i,error:l}=X({address:t}),o=(null==n?void 0:n.pages)||[],d=o.filter(el).length,m=o.length>0,f=r&&!m;return(0,u.g)({eventName:c.z.NotificationsPopoverDisplay,eventProperties:{unreadCount:d},eventOptions:{enabled:r,key:"user-notifications"}}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(et.bj,{className:"p-4 pr-2 flex items-center justify-between",children:[(0,s.jsx)("p",{className:"font-semibold text-white text-sm",children:"Notifications"}),(0,s.jsx)(en,{})]}),(0,s.jsxs)("div",{className:"overflow-auto h-full",children:[i&&null!=l&&(0,s.jsx)(p.Z,{error:l,title:"Could not load notifications"}),a&&(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)(er.Z,{count:5,height:20,width:"100%",className:"mb-1"})}),!f&&(0,s.jsx)(G,{data:o,address:t}),f&&(0,s.jsxs)("div",{className:"h-full flex flex-col gap-2 items-center justify-center p-2 pb-10",children:[(0,s.jsx)(x.qFB,{size:36}),(0,s.jsx)("p",{className:"text-sm",children:"You don't have any notifications yet."})]})]})]})}function eu(){let{address:e}=(0,ei.Z)(),{isSignedIn:t}=(0,d.Pe)();return(0,o.At)(e)?(0,s.jsxs)(et.J2,{placement:"bottom-end",children:[(0,s.jsx)(et.xo,{asChild:!0,children:(0,s.jsxs)("div",{className:"relative",children:[t&&(0,s.jsx)(eo,{address:e}),(0,s.jsx)(h.ZP,{className:"w-9 h-9",spacing:"flush",radius:"full",color:"tertiary",children:(0,s.jsx)(m.Z3q,{})})]})}),(0,s.jsx)(et.yk,{className:"grid grid-cols-1 grid-rows-[auto_1fr] w-full min-w-[424px] max-w-md max-h-[33vh] p-0 overflow-hidden",children:(0,s.jsx)(f.Z,{image:null,title:"",body:"Sign in with your wallet to view your notifications.",className:"p-4",children:(0,s.jsx)(ec,{address:e})})})]}):null}var ed=n(83112),ex=n(76785),em=n(97942);function ef(){var e,t;let n=(0,ed.Z)(),[a,r]=(0,i.useState)(!1),{address:l,isConnected:o}=(0,ei.Z)(),{data:u,isPending:d}=(0,em.bW)(l),m=(0,j.UJ)(),f=n.formatNumber(null!==(e=null==u?void 0:u.score)&&void 0!==e?e:0),p=Math.min(null!==(t=null==u?void 0:u.ranking)&&void 0!==t?t:0,999900),g=(0,i.useCallback)(e=>{e&&m(c.z.PowerScorePopoverDisplay),r(e)},[m]);return o?(0,s.jsxs)(et.J2,{open:a,onOpenChange:g,children:[(0,s.jsx)(et.xo,{asChild:!0,children:(0,s.jsx)(h.ZP,{spacing:"sm",color:"tertiary",uppercase:!0,children:(0,s.jsxs)(Z.Z,{className:"gap-1 capitalize items-center",children:[(0,s.jsx)("span",{children:"Power Score:"}),d?(0,s.jsx)(er.Z,{height:15,width:50}):(0,s.jsx)(es.Z,{value:f}),(0,s.jsx)("span",{className:"opacity-50",children:"Points"}),(0,s.jsx)("span",{className:"opacity-25 px-1",children:"|"}),(0,s.jsx)("span",{children:"Rank:"}),d?(0,s.jsx)(er.Z,{height:15,width:15}):(0,s.jsx)(es.Z,{value:n.formatNumber(p,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1})})]})})}),(0,s.jsxs)(et.yk,{className:"p-4 max-w-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3 pb-3 border-b border-primary-stroke",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsx)("p",{className:"opacity-50",children:"Score:"}),(0,s.jsx)(es.Z,{value:f,className:"font-bold"})]}),(null==u?void 0:u.ranking)!=null&&u.ranking>0&&(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsx)("p",{className:"opacity-50",children:"Rank:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[u.ranking<=3&&(0,s.jsx)(x.Bzj,{className:(0,L.cn)({"text-yellow-500":1===u.ranking,"text-gray-500":2===u.ranking,"text-amber-800":3===u.ranking})}),(0,s.jsx)(es.Z,{value:n.formatNumber(u.ranking),className:"font-bold"})]})]})]}),(0,s.jsxs)(et.Ej,{className:"text-sm pb-3",children:["Power Score represents your activity and achievements on RabbitHole, and determines eligibility for some quests. I.e. Quest creators may choose to allowlist the top 10% or 50% of users based on Power Score.",(0,s.jsx)(ex.Z,{href:"https://help.rabbithole.gg/quest-protocol/power-score",className:"underline ml-1",onClick:()=>m(c.z.ClickedPowerScoreExplainerLink),children:"See full details here"})]}),(0,s.jsx)(et.xp,{children:"Understood"})]})]}):null}var eh=n(30082),ep=n(20587),ej=n(31298),eg=n(32087);function ev(e){let{status:t="nostreak",width:n=20,height:a=20}=e;return(0,s.jsxs)("div",{className:(0,o.cn)("streak-icon",{streak:"active"===t||"pending"===t,nostreak:"nostreak"===t,"nostreak break":"broken"===t}),children:[(0,s.jsx)("svg",{className:"fire",viewBox:"0 0 20 20",fill:"none",width:n,height:a,children:(0,s.jsx)("path",{d:"M7.08332 11.6666C7.63586 11.6666 8.16576 11.4471 8.55646 11.0564C8.94716 10.6657 9.16666 10.1358 9.16666 9.58325C9.16666 8.43325 8.74999 7.91659 8.33332 7.08325C7.43999 5.29742 8.14666 3.70492 9.99999 2.08325C10.4167 4.16659 11.6667 6.16659 13.3333 7.49992C15 8.83325 15.8333 10.4166 15.8333 12.0833C15.8333 12.8493 15.6824 13.6078 15.3893 14.3156C15.0961 15.0233 14.6665 15.6664 14.1248 16.208C13.5831 16.7497 12.94 17.1794 12.2323 17.4725C11.5246 17.7657 10.766 17.9166 9.99999 17.9166C9.23395 17.9166 8.4754 17.7657 7.76767 17.4725C7.05994 17.1794 6.41688 16.7497 5.8752 16.208C5.33353 15.6664 4.90384 15.0233 4.61069 14.3156C4.31754 13.6078 4.16666 12.8493 4.16666 12.0833C4.16666 11.1224 4.52749 10.1716 4.99999 9.58325C4.99999 10.1358 5.21948 10.6657 5.61018 11.0564C6.00088 11.4471 6.53079 11.6666 7.08332 11.6666Z",fill:"#0D0D0D",stroke:"#A4A4A4",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("svg",{className:"broken bottom",viewBox:"0 0 20 20",fill:"none",width:n,height:a,children:(0,s.jsx)("path",{d:"M8.55646 11.0564C8.16576 11.4471 7.63586 11.6666 7.08332 11.6666C6.53079 11.6666 6.00088 11.4471 5.61018 11.0564C5.21948 10.6657 4.99999 10.1358 4.99999 9.58325C4.52749 10.1716 4.16666 11.1224 4.16666 12.0833C4.16666 12.8493 4.31754 13.6078 4.61069 14.3156C4.90384 15.0233 5.33353 15.6664 5.8752 16.208C6.41688 16.7497 7.05994 17.1794 7.76767 17.4725C8.4754 17.7657 9.23395 17.9166 9.99999 17.9166C10.766 17.9166 11.5246 17.7657 12.2323 17.4725C12.94 17.1794 13.5831 16.7497 14.1248 16.208L12.2323 12.5891L8.83797 14.6715L8.55646 11.0564Z",fill:"#F2D056",stroke:"#F25856",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("svg",{className:"broken top",width:n,height:a,viewBox:"0 0 20 20",fill:"none",children:(0,s.jsx)("path",{d:"M9.16668 9.58325C9.16668 10.1358 8.94718 10.6657 8.55648 11.0564L8.83799 14.6715L12.2323 12.5891L14.1248 16.208C14.6665 15.6664 15.0962 15.0233 15.3893 14.3156C15.6825 13.6078 15.8333 12.8493 15.8333 12.0833C15.8333 10.4166 15 8.83325 13.3333 7.49992C11.6667 6.16658 10.4167 4.16659 10 2.08325C8.14668 3.70492 7.44001 5.29742 8.33334 7.08325C8.75001 7.91659 9.16668 8.43325 9.16668 9.58325Z",fill:"#F2D056",stroke:"#F25856",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("div",{className:"dot one"}),(0,s.jsx)("div",{className:"dot two"}),(0,s.jsx)("div",{className:"dot three"}),(0,s.jsx)("div",{className:"dot four"})]})}function ey(e){return e>=10?"".concat(e):"0".concat(e)}function eb(e){let{value:t,status:n,isActive:a,timeLeft:r,children:l}=e,[c,u]=(0,i.useState)(!1),d=(0,i.useRef)(n),x=t>0,m=x&&!a;return(0,i.useEffect)(()=>{n===eh.HZ.Enum.broken&&d.current===eh.HZ.Enum.pending?u(!0):u(!1)},[n]),(0,s.jsxs)("div",{className:"flex gap-1 items-center tabular-nums",children:[n!==eh.HZ.Enum.broken||c?(0,s.jsx)(ev,{status:c?"broken":n}):(0,s.jsx)(ev,{}),x?(0,s.jsxs)("span",{className:"inline-flex",children:[(0,s.jsx)(es.Z,{value:String(t)}),"d Streak"]}):(0,s.jsx)("span",{children:"No Streak"}),m&&(0,s.jsx)("span",{className:(0,o.cn)("font-thin lowercase pl-2",{"text-primary":x&&"high"===r,"text-yellow-500":"medium"===r,"text-red-500":"low"===r}),children:l})]})}function ew(e){let{value:t,status:n,nextExpirationTime:a,lastExpirationTime:r,onStreakReset:l}=e,[u,d]=(0,i.useState)(!1),x=(0,j.UJ)(),m=(0,o.fY)(),f=n===eh.HZ.Enum.active,p=(0,i.useCallback)(e=>{e&&x(c.z.StreakPopoverDisplay),d(e)},[x]);return(0,s.jsxs)(et.J2,{open:u,onOpenChange:p,children:[(0,s.jsx)(ej.ZP,{date:a,onComplete:l,renderer:e=>{let a=function(e){switch(!0){case e>=(0,ep.Z)(9):return"high";case e<(0,D.Z)(60):break;case e<(0,ep.Z)(9):return"medium"}return"low"}(e.total);return(0,s.jsx)(et.xo,{asChild:!0,children:(0,s.jsx)(h.ZP,{spacing:"sm",color:"tertiary",children:(0,s.jsx)(eb,{status:n,value:t,isActive:f,timeLeft:a,children:e.hours<1?(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(es.Z,{value:ey(e.minutes)}),"m"]}),(0,s.jsxs)("span",{className:"flex items-center relative",children:[(0,s.jsx)(es.Z,{value:ey(e.seconds)}),"s"]})]}):(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsxs)("span",{className:"flex items-center relative",children:[(0,s.jsx)(es.Z,{value:ey(e.hours)}),"h"]}),(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(es.Z,{value:ey(e.minutes)}),"m"]})]})})})})}},a.getTime()),(0,s.jsxs)(et.yk,{className:"p-4 max-w-sm",children:[(0,s.jsx)("p",{className:"font-semibold",children:"About Streaks"}),(0,s.jsxs)(et.Ej,{className:"text-sm flex flex-col pb-3",children:[f&&(0,s.jsx)("span",{children:"Great job, you completed a quest and kept your streak alive!"}),(0,s.jsx)("span",{className:"mb-3 pb-3 border-b border-primary-stroke",children:"Streaks reset every day at 00:00 UTC. Complete a quest every day to keep your streak alive."}),(0,s.jsxs)("span",{children:["Last streak reset time:"," ",(0,g.Z)(r,"MM/dd @ hh:mm aa"),"*"]}),(0,s.jsxs)("span",{children:["Next streak reset time:"," ",(0,g.Z)(a,"MM/dd @ hh:mm aa"),"*"]}),(0,s.jsxs)("span",{className:"text-xs opacity-50",children:["* - ",m]})]}),(0,s.jsx)(et.xp,{children:"Understood"})]})]})}function eN(){let{address:e,isConnected:t}=(0,ei.Z)(),n=(0,em.bW)(e);return t?(0,eg.EQ)(n).with({status:"pending"},()=>(0,s.jsx)("div",{className:"h-9 overflow-hidden relative w-[100px]",children:(0,s.jsx)(er.Z,{width:"100%",height:"100%",className:"absolute left-0 top-0"})})).with({status:"success",data:eg.P.not(void 0)},t=>{let{data:{streak:a}}=t;return(0,s.jsx)(ew,{value:a.value,status:a.status,nextExpirationTime:a.nextExpirationTime,lastExpirationTime:a.lastExpirationTime,onStreakReset:()=>{(0,o.At)(e)&&a.status===eh.HZ.Enum.pending&&(0,em.p$)({address:e}),setTimeout(()=>n.refetch(),1e3)}})}).otherwise(()=>null):null}function ek(e){let{children:t}=e,n=i.Children.count(t)>=1;return(0,s.jsxs)("div",{className:r()("flex-col-reverse gap-4 sm:flex-row sm:items-center justify-center sm:justify-between overflow-x-auto bg-card py-4 px-7 border-b border-b-primary-stroke",{"hidden md:flex":!n,flex:n}),children:[(0,s.jsx)("div",{className:"flex items-center gap-5 justify-center w-full sm:w-auto",children:t}),(0,s.jsxs)("div",{className:"items-center justify-center gap-4 hidden md:flex",children:[(0,s.jsx)(ef,{}),(0,s.jsx)(eN,{}),(0,s.jsx)(l.Z,{spacing:"sm",color:"tertiary",uppercase:!1}),(0,s.jsx)(eu,{})]})]})}},89079:function(e,t,n){n.d(t,{Ej:function(){return g},J2:function(){return f},bj:function(){return j},lp:function(){return m},xo:function(){return h},xp:function(){return v},yk:function(){return p}});var s=n(52322),a=n(67777),r=n(75580),i=n(84061),l=n(69423),o=n(95695),c=n(72486),u=n(2784),d=n(70040);let x=u.createContext(null),m=()=>{let e=u.useContext(x);if(null==e)throw Error("Popover components must be wrapped in <Popover />");return e};function f(e){let{children:t,modal:n=!1,...l}=e,o=function(){let{initialOpen:e=!1,placement:t="bottom",offsetAmount:n=8,modal:s,open:l,onOpenChange:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[c,d]=u.useState(e),[x,m]=u.useState(),[f,h]=u.useState(),p=null!=l?l:c,j=null!=o?o:d,g=(0,a.YF)({placement:t,open:p,onOpenChange:j,whileElementsMounted:r.Me,middleware:[(0,i.cv)(n),(0,r.RR)(),(0,r.uY)({padding:5})]}),v=g.context,y=(0,a.eS)(v),b=(0,a.bQ)(v),w=(0,a.qs)(v),N=(0,a.NI)([y,b,w]);return u.useMemo(()=>({open:p,setOpen:j,...N,...g,modal:s,labelId:x,descriptionId:f,setLabelId:m,setDescriptionId:h}),[p,j,N,g,s,x,f])}({modal:n,...l});return(0,s.jsx)(x.Provider,{value:o,children:t})}let h=u.forwardRef(function(e,t){let{children:n,asChild:r=!1,...i}=e,l=m(),o=n.ref,c=(0,a.qq)([l.refs.setReference,t,o]);return r&&u.isValidElement(n)?u.cloneElement(n,l.getReferenceProps({ref:c,...i,...n.props,"data-state":l.open?"open":"closed"})):(0,s.jsx)("button",{ref:c,type:"button","data-state":l.open?"open":"closed",...l.getReferenceProps(i),children:n})}),p=u.forwardRef(function(e,t){var n,r;let{context:i,...u}=m(),d=(0,a.qq)([u.refs.setFloating,t]);return(0,s.jsx)(o.M,{children:u.open&&(0,s.jsx)(a.ll,{children:(0,s.jsx)(a.wD,{context:i,modal:u.modal,children:(0,s.jsx)(c.E.div,{initial:{y:"-10%",opacity:0},animate:{opacity:1,y:"0%"},ref:d,style:{position:u.strategy,top:null!==(n=u.y)&&void 0!==n?n:0,left:null!==(r=u.x)&&void 0!==r?r:0,width:"max-content",...e.style},"aria-labelledby":u.labelId,"aria-describedby":u.descriptionId,...u.getFloatingProps(e),className:(0,l.cn)("z-50 bg-card border border-primary-stroke p-2 rounded-lg shadow-lg",e.className),children:e.children})})})})}),j=u.forwardRef(function(e,t){let{children:n,...r}=e,{setLabelId:i}=m(),l=(0,a.PC)();return u.useLayoutEffect(()=>(i(l),()=>i(void 0)),[l,i]),(0,s.jsx)("h2",{...r,ref:t,id:l,children:n})}),g=u.forwardRef(function(e,t){let{children:n,...r}=e,{setDescriptionId:i}=m(),l=(0,a.PC)();return u.useLayoutEffect(()=>(i(l),()=>i(void 0)),[l,i]),(0,s.jsx)("p",{...r,ref:t,id:l,children:n})}),v=u.forwardRef(function(e,t){let{onClick:n,...a}=e,{setOpen:r}=m();return(0,s.jsx)(d.ZP,{size:"sm",spacing:"xs",variant:"flat",color:"tertiary",onClick:e=>{null==n||n(e),r(!1)},ref:t,type:"button",...a})})},25599:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(52322),a=n(14080);function r(e){return(0,s.jsx)(a.Z,{baseColor:"rgba(255, 255, 255, .1)",highlightColor:"rgba(255, 255, 255, .2)",...e})}},10029:function(e,t,n){n.d(t,{Z:function(){return l}});var s=n(52322),a=n(12744),r=n(45575),i=n(60009);function l(e){let{text:t="To use RabbitHole you need a valid wallet"}=e;return(0,s.jsx)(a.Z,{centerVertically:!0,children:(0,s.jsx)(i.Z,{title:"Please connect your wallet",body:t,image:"sphere",children:(0,s.jsx)(r.Z,{size:"sm",variant:"gradient",color:"primary"})})})}},97942:function(e,t,n){n.d(t,{Q$:function(){return h},Sf:function(){return f},bW:function(){return g},jL:function(){return p},p$:function(){return j}});var s=n(30206),a=n(30082),r=n(69423),i=n(42180),l=n(10711),o=n(93355),c=n(98365),u=n(7278);let d=(0,l.Z)(2),x={days:1},m=()=>{let e=(0,o.Z)(new Date,x);return e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e},f=e=>["profile",{address:e}],h=e=>{let{address:t,score:n}=e;u.E.setQueryData(f(t),e=>{if(null==e){let e=m(),t=(0,c.Z)(e,x);return{ethEarned:"0",score:n,streak:{value:0,status:a.HZ.Enum.broken,lastExpirationTime:t,nextExpirationTime:e,lastCompletionTime:null}}}return{...e,score:e.score+n}})},p=e=>{let{address:t}=e;u.E.setQueryData(f(t),e=>{let t=m(),n=(0,c.Z)(t,x);return null==e?{ethEarned:"0",score:0,streak:{value:1,status:a.HZ.Enum.active,lastExpirationTime:n,nextExpirationTime:t,lastCompletionTime:null}}:e.streak.status===a.HZ.Enum.active?e:{...e,streak:{value:e.streak.value+1,status:a.HZ.Enum.active,lastExpirationTime:n,nextExpirationTime:t,lastCompletionTime:new Date}}})},j=e=>{let{address:t}=e;u.E.setQueryData(f(t),e=>{if(null!=e)return{...e,streak:{...e.streak,value:0,status:a.HZ.Enum.broken}}})},g=e=>(0,i.a)({queryKey:f(e),queryFn:()=>((0,r.hu)((0,r.At)(e),s.qF.INVALID_ADDRESS),a.ZP.getUserProfile({userAddress:e})),enabled:(0,r.At)(e),select:e=>{let{score:t,...n}=e;return{score:Math.floor(t),...n}},refetchInterval:d,refetchIntervalInBackground:!0})},63686:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(88329),a=n(69423),r=n(56370),i=n(65058),l=n(752),o=n(2784),c=n(45627);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};let u=globalThis.jotaiAtomCache.get("/vercel/path0/apps/gateway/hooks/useWallet.ts/addressAtom",(0,i.cn)(void 0));function d(){let e=(0,s.tm)(),{setOpen:t,openSIWE:n}=(0,r.dd)(),[i,d]=(0,l.KO)(u),{address:x,isConnected:m,...f}=(0,c.m)(),h=(0,o.useCallback)(()=>{t(!0)},[t]);return(0,o.useEffect)(()=>{e&&d((0,a.At)(x)?x:void 0)},[e,d,x]),(0,o.useMemo)(()=>({...f,address:i,isMounted:e&&!f.isReconnecting,isConnected:m&&(0,a.At)(i),showConnectModal:h,openSIWE:n}),[f,i,e,m,h,n])}},21226:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(52322),a=n(95695),r=n(72486);function i(e){let{value:t,className:n}=e;return(0,s.jsx)("div",{className:"flex items-center relative",children:(0,s.jsx)(a.M,{mode:"popLayout",initial:!1,children:t.split("").map((e,t)=>(0,s.jsx)(r.E.div,{initial:{y:10,opacity:.5,scale:.5},animate:{y:0,scale:1,opacity:1},exit:{y:-10,opacity:1,scale:0},layout:!0,className:n,transition:{duration:.4},children:e},"".concat(e,"-").concat(t)))})})}}}]);